# 软件架构 MVC MVP MVVM

## MVC

软件可以分成三个部分。

- 视图（View）：用户界面。
- 控制器（Controller）：业务逻辑
- 模型（Model）：数据保存

通信方式:

1. View 传送指令到 Controller
2. Controller 完成业务逻辑后，要求 Model 改变状态
3. Model 将新的数据发送到 View，用户得到反馈

![img](images/MVC.PNG)

## MVP

MVP 模式将 Controller 改名为 Presenter，同时改变了通信方向。

1. 各部分之间的通信，都是双向的。

2. View 与 Model 不发生联系，都通过 Presenter 传递。

3. View 非常薄，不部署任何业务逻辑，称为"被动视图"（Passive View），即没有任何主动性，而 **Presenter**非常厚，所有逻辑都部署在那里。

![img](images/MVP.PNG)

## MVVM

MVVM 模式将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。[Angular](https://angularjs.org/) 和 [Ember](http://emberjs.com/) 都采用这种模式。

![img](images/MVVM.PNG)

# 加密算法

## 哈希函数

标识原信息, 把任意长度的数据计算成固定长度的数据, 达到加密效果

- 不可逆(不能根据哈希值逆推出原内容)
- 不同内容的哈希值相同的概率相当小
- 原始内容的任意一点改变, 哈希值都会有巨大的不同

输入: 任意长

输出: 定长的信息摘要(Message Digest)

使用场景:

- 密码校验
- 文件校验

## MD5

Message Digest Algorithm MD5，消息摘要算法第五版

**返回值**

二进制 128bit <=> 32位十六进制数

**不足**

- 寻找一对碰撞(一对不同数据MD5值相同)的速度加快, 即安全性会有所降低
- 彩虹表
  - 是一个庞大的数据库，这个数据库里收集了着咱们所有人**常用的密码**，以及**这些密码对应的MD5值、SHA-X值等哈希值**（当然还有别的各种哈希算法的哈希值，不止MD5和SHA-X）
  - 主流彩虹表的大小一般都是100G以上

**应对**

- 复杂密码
- 简单密码复杂化(加盐)
  - 加盐: 在密码的任意位置插入一些指定的字符串（即盐值salt）的过程
    - 每个用户盐值唯一, 防止大面积被破解
    - 服务端为每个用户随机生成, 保存在数据库中
    - 分散插入密码中, 不要简单拼接

**开发中实际采用方案**

盐值由服务端生成并存储, 加盐可以由服务端或者客户端进行.

1. 客户端加盐
   1. 客户端调用接口请求盐值
   2. 客户端 MD5(pwd + salt)
   3. 客户端调用登录接口, 服务端保存密码
2. 服务端加盐
   1. 客户端MD5(pwd)
   2. 客户端调用登录接口
   3. 服务端 MD5(MD5(pwd) + salt), 服务端保存密码

**具体应用场景**

- 密码加密
- 数字签名

## SHA 家族算法

Secure Hash Algorithm，安全散列算法, 包括SHA-1、SHA-256等多种算法

### SHA-1

SHA-1算法和MD5算法都由 MD4算法导出，因此他们俩的特点、缺陷、应用场景基本是相同的。

返回值:

二进制 160bit <=> 40位十六进制数, 因此更加安全.

### SHA-2

可再分为六个不同的算法标准, 包括：SHA-224、SHA-256、SHA-384、SHA-512、SHA-512/224、SHA-512/256。

SHA-256

返回值 256bit <=> 64 位十六进制数



































